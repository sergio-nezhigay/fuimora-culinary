{{- 'cards-with-text.out.css' | asset_url | stylesheet_tag -}}

{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top_mb }}px;
    padding-bottom: {{ section.settings.padding_bottom_mb }}px;
  }

  @media screen and (min-width: 768px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
  .section-{{ section.id }} {
    background: {{ section.settings.bg_color }};
    overflow: hidden;
  }
  .section-{{ section.id }} p, .section-{{ section.id }} h2, .section-{{ section.id }} h3,.section-{{ section.id }} h4,.section-{{ section.id }} h5,.section-{{ section.id }} h6 {
    color: {{ section.settings.text_color }};
  }
  .section-{{ section.id }} .button {
      color: {{ section.settings.text_color_button }};
      background: {{ section.settings.bg_color_button }};
  }
{%- endstyle -%}

<section
  class="section-{{ section.id }}{% if section.settings.style_2 == true %} cards-with-text--style-2{% endif %} cards-with-text custom-container section-{{ section.id }}-padding"
>
  <div class="cards-with-text__text-content">
    <h2 class="h2-custom">{{ section.settings.title }}</h2>
    <p>{{ section.settings.subtitle }}</p>
  </div>
  <div class="cards-with-text__content">
    {% for block in section.blocks %}
      <div class="cards-with-text__card">
        {% if block.settings.image != blank %}
          {%- liquid
            assign image_width = block.settings.image.width
            assign image_height = image_width | divided_by: section.settings.image.aspect_ratio
          -%}
          {{
            block.settings.image
            | image_url: width: 1400, format: 'webp'
            | image_tag:
              width: image_width,
              height: image_height,
              loading: 'lazy',
              fetchpriority: 'high',
              sizes: '(max-width: 750px) 350px, 700px',
              widths: '350, 700, 1100, 1400',
              alt: 'Image card'
          }}
        {% endif %}

        <h4>{{ block.settings.title }}</h4>
        <p class="p-custom">{{ block.settings.text }}</p>
      </div>
    {% endfor %}
  </div>
  {% if section.settings.btn_url != blank %}
    <a class="button button--solid button--with-icon" href="{{ section.settings.btn_url }}">
      {{- section.settings.btn_label }}
      <span class="icon" aria-hidden="true" role="img">
        {%- render 'theme-symbols', icon: 'arrow_icon_smallest' -%}
      </span>
    </a>
  {% endif %}
</section>

{% schema %}
{
  "name": "Cards with text",
  "settings": [
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background color",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#262221"
    },
    {
      "type": "checkbox",
      "id": "style_2",
      "label": "Section style 2",
      "default": false
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title"
    },
    {
      "type": "text",
      "id": "subtitle",
      "label": "Subtitle"
    },
    {
      "type": "header",
      "content": "Button"
    },
    {
      "type": "url",
      "id": "btn_url",
      "label": "Url"
    },
    {
      "type": "text",
      "id": "btn_label",
      "label": "Label"
    },
    {
      "type": "color",
      "id": "bg_color_button",
      "label": "Button background color",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "text_color_button",
      "label": "Button text color",
      "default": "#262221"
    },
    {
      "type": "header",
      "content": "Paddings"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "Padding top (desktop)",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "Padding bottom (desktop)",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_top_mb",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "Padding top (mobile)",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom_mb",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "Padding bottom (mobile)",
      "default": 0
    }
  ],
  "blocks": [
    {
      "type": "card",
      "name": "Card",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title"
        },

        {
          "type": "text",
          "id": "text",
          "label": "Text"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Cards with text"
    }
  ]
}
{% endschema %}
