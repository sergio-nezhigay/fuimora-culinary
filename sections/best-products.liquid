{%- render 'custom-colors', id: section.id, background: section.settings.custom_background, text: section.settings.custom_text -%}

{{ 'section-best-products.css' | asset_url | stylesheet_tag }}

<section id="section-{{ section.id }}" class="best-products" style="--section-padding-top: {{ section.settings.padding_top }}px; --section-padding-bottom: {{ section.settings.padding_bottom }}px;">

  <div class="best-products__wrapper">

    {%- comment -%} Section Heading {%- endcomment -%}
    {%- if section.settings.title != blank -%}
      <div class="best-products__heading">
        <{{ section.settings.seo_h_tag }} class="best-products__title {{ section.settings.heading_size }}">
          {{ section.settings.title | escape }}
        </{{ section.settings.seo_h_tag }}>
      </div>
    {%- endif -%}

    {%- comment -%} Product Slider {%- endcomment -%}
    <css-slider
      class="best-products__slider css-slider--simple-dots"
      data-options='{
        "selector": ".best-products__product-card",
        "navigation": true,
        "autoHeight": false,
        "watchCSS": false,
        "thumbnails": true,
        "groupCells": false
      }'
      style="display:block"
      id="css-slider-{{ section.id }}"
    >
      {%- if section.settings.collection != blank -%}
        {%- for product in section.settings.collection.products limit: section.settings.products_to_show -%}
          {%- render 'best-products-card', product: product -%}
        {%- endfor -%}
      {%- else -%}
        {%- comment -%} Placeholder products for theme editor {%- endcomment -%}
        {%- for i in (1..4) -%}
          <div class="best-products__product-card">
            <div class="best-products__card-inner">
              <div class="best-products__image-wrapper">
                {{ 'product-' | append: forloop.index | placeholder_svg_tag }}
              </div>
              <div class="best-products__content">
                <div class="best-products__reviews">
                  <div class="best-products__stars" aria-hidden="true">
                    {%- for i in (1..5) -%}
                      {%- if i <= 4 -%}
                        <span class="best-products__star best-products__star--full">
                          <svg width="16" height="16" viewBox="0 0 18 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 0L11.0206 6.21885H17.5595L12.2694 10.0623L14.2901 16.2812L9 12.4377L3.70993 16.2812L5.73056 10.0623L0.440492 6.21885H6.97937L9 0Z" fill="currentColor"/>
                          </svg>
                        </span>
                      {%- else -%}
                        <span class="best-products__star best-products__star--half">
                          <svg width="16" height="16" viewBox="0 0 18 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <defs>
                              <linearGradient id="half-placeholder-{{ forloop.index }}">
                                <stop offset="50%" stop-color="currentColor"/>
                                <stop offset="50%" stop-color="transparent"/>
                              </linearGradient>
                            </defs>
                            <path d="M9 0L11.0206 6.21885H17.5595L12.2694 10.0623L14.2901 16.2812L9 12.4377L3.70993 16.2812L5.73056 10.0623L0.440492 6.21885H6.97937L9 0Z" fill="url(#half-placeholder-{{ forloop.index }})" stroke="currentColor" stroke-width="0.5"/>
                          </svg>
                        </span>
                      {%- endif -%}
                    {%- endfor -%}
                  </div>
                  <span class="best-products__rating-text">(23 reviews)</span>
                </div>
                <h3 class="best-products__product-title">Product Title {{ forloop.index }}</h3>
                <p class="best-products__price">From $79.95</p>
                <p class="best-products__description">This is a sample product description that will be truncated to 2-3 lines using CSS ellipsis.</p>
                <button class="best-products__add-to-cart">
                  <span>Add to cart - $79.95</span>
                  <span class="icon" aria-hidden="true" role="img">
                    {%- render 'theme-symbols', icon: 'arrow_icon_smallest' -%}
                  </span>
                </button>
              </div>
            </div>
          </div>
        {%- endfor -%}
      {%- endif -%}
    </css-slider>

  </div>

</section>

{% schema %}
{
  "name": "Trending products",
  "class": "mount-best-products",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Section Heading",
      "default": "Trending products"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "range",
      "id": "products_to_show",
      "min": 4,
      "max": 50,
      "step": 1,
      "label": "Products to Show",
      "default": 8
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "custom_background",
      "label": "Background Color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "custom_text",
      "label": "Text Color",
      "default": "#262221"
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 200,
      "step": 10,
      "unit": "px",
      "label": "Top Padding",
      "default": 80
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 200,
      "step": 10,
      "unit": "px",
      "label": "Bottom Padding",
      "default": 80
    },
    {
      "type": "header",
      "content": "SEO"
    },
    {
      "type": "select",
      "id": "seo_h_tag",
      "label": "Heading Tag",
      "options": [
        { "value": "h1", "label": "H1" },
        { "value": "h2", "label": "H2" },
        { "value": "h3", "label": "H3" },
        { "value": "h4", "label": "H4" },
        { "value": "span", "label": "span" }
      ],
      "default": "h2"
    },
    {
      "type": "select",
      "id": "heading_size",
      "label": "Heading Size",
      "options": [
        { "value": "h3", "label": "Small" },
        { "value": "h2", "label": "Regular" },
        { "value": "h1", "label": "Large" }
      ],
      "default": "h2"
    }
  ],
  "presets": [
    {
      "name": "Trending products"
    }
  ],
  "disabled_on": {
    "groups": ["custom.overlay", "header"]
  }
}
{% endschema %}
